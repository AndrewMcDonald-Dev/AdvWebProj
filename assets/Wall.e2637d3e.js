import{j as w,d as m,o as p,c as _,l as $,n as d,b as k,z as S,a as s,t as h,g as B,u as n,F as f,p as C,e as D,A as b,w as I,v as T,q as A,r as N,B as P,s as g,S as V,f as y}from"./vendor.af3886c7.js";import{u as U,a as v,r as E,_ as x}from"./index.ed32d782.js";const F=a=>{const t=a.split("-");return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])).getTime()},M=w("tasks",{state:()=>({tasks:[],session:U(),currentTab:"All",newTask:"",toBeAssigned:"",newDueDate:""}),actions:{changeTab(a){this.currentTab=a},async addTask(){if(!this.session.user)throw new Error("Current user not stored in addTask().");if(this.newTask&&this.toBeAssigned&&this.newDueDate){const a={title:this.newTask,isCompleted:!1,assignedTo:await this.session.api(`users/${this.toBeAssigned}`),createdBy:this.session.user,dueDate:F(this.newDueDate)};(await this.session.api("tasks",a,"POST")).data,this.newTask="",this.toBeAssigned="",this.newDueDate="",await this.fetchTasks()}},changeToBeAssigned(a){this.toBeAssigned=a},async fetchTasks(){this.tasks=(await v("tasks")).data},async deleteTask(a){await v(`tasks/${this.tasks[a]._id}`,null,"DELETE"),this.tasks.splice(a,1)},async saveTask(a){const t=this.tasks[a],l={isCompleted:!t.isCompleted};await v(`tasks/${t._id}`,l,"PATCH")}},getters:{displayedTasks:({tasks:a,currentTab:t,session:l})=>{switch(l.user||E.push("/login"),t){case"Created":return a.filter(({createdBy:i})=>{var e;return i._id===((e=l.user)==null?void 0:e._id)});case"Assigned":return a.filter(({assignedTo:i})=>{var e;return i._id===((e=l.user)==null?void 0:e._id)});case"Upcoming":return a.sort((i,e)=>i.dueDate-e.dueDate);case"Completed":return a.filter(({isCompleted:i})=>i);case"All":return a.sort((i,e)=>new Date(e.timeCreated).getTime()-new Date(i.timeCreated).getTime());default:return a}}}}),j=w("users",{state:()=>({list:[],session:U()}),actions:{async fetchUsers(){this.list=await this.session.api("users")}},getters:{findUser:a=>t=>{const l=a.list.find(({_id:i})=>i===t);if(!l)throw new Error("failed to find user in findUser");return l}}}),q=a=>{const t=new Date(a);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`};const L=a=>(C("data-v-aa45a612"),a=a(),D(),a),z=["onUpdate:modelValue","onClick"],R={class:"task-text"},H={class:"task-container"},O={class:"mini-avatar"},W={class:"image is-32x32"},Y=["src"],G={class:"date"},J=L(()=>s("h4",null,"Due Date:",-1)),K={class:"delete-button"},Q=["onClick"],X=m({props:{tasks:null,currentTab:null,findUser:null,deleteTask:null,saveTask:null},setup(a){return(t,l)=>(p(!0),_(f,null,$(a.tasks,(i,e)=>(p(),_("a",{class:d(["panel-block",{"is-completed":a.currentTab!="Completed"&&i.isCompleted}]),key:e},[k(s("input",{type:"checkbox","onUpdate:modelValue":r=>i.isCompleted=r,onClick:r=>a.saveTask(e)},null,8,z),[[S,i.isCompleted]]),s("div",R,h(i.title),1),s("div",H,[s("div",O,[s("figure",W,[s("img",{src:a.findUser(i.assignedTo._id).pic,class:"img is-rounded"},null,8,Y)]),s("p",null,h(a.findUser(i.assignedTo._id).firstName),1)]),s("div",G,[J,B(" "+h(n(q)(i.dueDate)),1)]),s("div",K,[s("button",{class:"delete is-large",onClick:r=>a.deleteTask(e)},null,8,Q)])])],2))),128))}});var Z=x(X,[["__scopeId","data-v-aa45a612"]]);const u=a=>(C("data-v-344895a7"),a=a(),D(),a),ss={class:"tabs is-boxed"},es=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-clipboard-list"})]),s("span",null,"Created")],-1)),as=[es],ts=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-calendar-times"})]),s("span",null,"Assigned")],-1)),is=[ts],ns=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fa-solid fa-calendar-days"})]),s("span",null,"Upcoming")],-1)),ls=[ns],os=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fa-solid fa-calendar-check"})]),s("span",null,"Completed")],-1)),cs=[os],ds=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-calendar"})]),s("span",null,"All")],-1)),rs=[ds],us={class:"panel-block"},ps={class:"columns"},_s={class:"field has-addons column is-5"},hs={class:"control has-icons-left"},vs=u(()=>s("span",{class:"icon is-left"},[s("i",{class:"fas fa-calendar-plus","aria-hidden":"true"})],-1)),ks=u(()=>s("div",{class:"control"},[s("button",{class:"button is-primary"},"Add")],-1)),fs={class:"column is-2"},ms={class:"dropdown is-hoverable"},bs={class:"dropdown-trigger"},Ts={class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},gs=u(()=>s("span",{class:"icon is-small"},[s("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1)),ws={class:"dropdown-menu",id:"dropdown-menu4",role:"menu"},$s={class:"dropdown-content"},Cs=["onClick"],Ds={class:"image is-32x32"},As=["src"],ys={class:"column is-3"},Us=m({async setup(a){let t,l;const i=j(),e=M();return[t,l]=b(()=>e.fetchTasks()),await t,l(),[t,l]=b(()=>i.fetchUsers()),await t,l(),(r,o)=>(p(),_(f,null,[s("div",ss,[s("ul",null,[s("li",{class:d({"is-active":n(e).currentTab=="Created"}),onClick:o[0]||(o[0]=c=>n(e).changeTab("Created"))},as,2),s("li",{class:d({"is-active":n(e).currentTab=="Assigned"}),onClick:o[1]||(o[1]=c=>n(e).changeTab("Assigned"))},is,2),s("li",{class:d({"is-active":n(e).currentTab=="Upcoming"}),onClick:o[2]||(o[2]=c=>n(e).changeTab("Upcoming"))},ls,2),s("li",{class:d({"is-active":n(e).currentTab=="Completed"}),onClick:o[3]||(o[3]=c=>n(e).changeTab("Completed"))},cs,2),s("li",{class:d({"is-active":n(e).currentTab=="All"}),onClick:o[4]||(o[4]=c=>n(e).changeTab("All"))},rs,2)])]),s("div",us,[s("form",{onSubmit:o[7]||(o[7]=I((...c)=>n(e).addTask&&n(e).addTask(...c),["prevent"])),style:{"flex-grow":"1"}},[s("div",ps,[s("div",_s,[s("div",hs,[k(s("input",{class:"input is-primary",type:"text",placeholder:"New Task","onUpdate:modelValue":o[5]||(o[5]=c=>n(e).newTask=c),maxlength:"35",required:""},null,512),[[T,n(e).newTask]]),vs]),ks]),s("div",fs,[s("div",ms,[s("div",bs,[s("button",Ts,[s("span",null,h(n(e).toBeAssigned?n(i).findUser(n(e).toBeAssigned).firstName:"Worker"),1),gs])]),s("div",ws,[s("div",$s,[(p(!0),_(f,null,$(n(i).list,c=>(p(),_("a",{class:"dropdown-item mini-avatar",onClick:Ls=>n(e).changeToBeAssigned(c._id)},[s("figure",Ds,[s("img",{src:c.pic,class:"img is-rounded"},null,8,As)]),s("p",null,h(c.firstName),1)],8,Cs))),256))])])])]),s("div",ys,[k(s("input",{type:"date",class:"date-picker",required:"","onUpdate:modelValue":o[6]||(o[6]=c=>n(e).newDueDate=c)},null,512),[[T,n(e).newDueDate]])])]),A(Z,{tasks:n(e).displayedTasks,currentTab:n(e).currentTab,findUser:n(i).findUser,deleteTask:n(e).deleteTask,saveTask:n(e).saveTask},null,8,["tasks","currentTab","findUser","deleteTask","saveTask"])],32)])],64))}});var xs=x(Us,[["__scopeId","data-v-344895a7"]]);const Ss={class:"section"},Bs={class:"container"},Is={class:"columns"},Ns={class:"column is-7"},Ps={class:"panel"},Vs=s("div",null,"Loading",-1),Es={class:"column is-4"},Fs={class:"panel"},Ms=y('<p class="panel-heading">Repositories</p><div class="panel-block"><p class="control has-icons-left"><input class="input" type="text" placeholder="Search"><span class="icon is-left"><i class="fas fa-search" aria-hidden="true"></i></span></p></div>',2),js={class:"panel-tabs"},qs=y('<a class="panel-block is-active"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> bulma </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> marksheet </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> minireset.css </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> jgthms.github.io </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-code-branch" aria-hidden="true"></i></span> daniellowtw/infboard </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-code-branch" aria-hidden="true"></i></span> mojs </a><label class="panel-block"><input type="checkbox"> remember me </label><div class="panel-block"><button class="button is-link is-outlined is-fullwidth">Reset all filters</button></div>',8),Hs=m({setup(a){const t=N("All"),l=i=>{t.value=i};return(i,e)=>(p(),_("div",Ss,[s("div",Bs,[s("div",Is,[s("div",Ns,[s("article",Ps,[(p(),P(V,null,{default:g(()=>[A(xs)]),fallback:g(()=>[Vs]),_:1}))])]),s("div",Es,[s("nav",Fs,[Ms,s("p",js,[s("a",{class:d({"is-active":t.value=="All"}),onClick:e[0]||(e[0]=r=>l("All"))},"All",2),s("a",{class:d({"is-active":t.value=="Public"}),onClick:e[1]||(e[1]=r=>l("Public"))},"Public",2),s("a",{class:d({"is-active":t.value=="Private"}),onClick:e[2]||(e[2]=r=>l("Private"))},"Private",2),s("a",{class:d({"is-active":t.value=="Sources"}),onClick:e[3]||(e[3]=r=>l("Sources"))},"Sources",2),s("a",{class:d({"is-active":t.value=="Forks"}),onClick:e[4]||(e[4]=r=>l("Forks"))},"Forks",2)]),qs])])])])]))}});export{Hs as default};
