var W=Object.defineProperty;var O=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var q=(a,t,o)=>t in a?W(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,E=(a,t)=>{for(var o in t||(t={}))F.call(t,o)&&q(a,o,t[o]);if(O)for(var o of O(t))D.call(t,o)&&q(a,o,t[o]);return a};import{d as y,o as _,c as m,a as e,t as w,r as v,w as R,b as h,v as g,p as U,e as I,f as M,u,g as f,h as J,i as z,j as B,k as G,F as j,l as K,n as N,m as V,q as d,s as b,x as Q,y as X}from"./vendor.af3886c7.js";const Y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}};Y();const Z="modulepreload",T={},ee="/",te=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${ee}${n}`,n in T)return;T[n]=!0;const s=n.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":Z,s||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),s)return new Promise((c,k)=>{r.addEventListener("load",c),r.addEventListener("error",k)})})).then(()=>t())},se={class:"section"},oe={class:"title"},L=y({props:{title:{type:String,defualt:"Hello World"}},setup(a){const t=a;return(o,n)=>(_(),m("div",se,[e("h1",oe,w(t.title),1)]))}});var S=(a,t)=>{const o=a.__vccOpts||a;for(const[n,s]of t)o[n]=s;return o};const ae={},ne={class:"container"},ie=e("h1",{class:"title"},"Praying for Ukraine",-1),re=[ie];function le(a,t){return _(),m("div",ne,re)}var ce=S(ae,[["render",le]]);const ue=a=>(U("data-v-1c898fca"),a=a(),I(),a),de={class:"section"},pe={class:"wrap"},_e=ue(()=>e("div",{class:"form-header"},[e("h3",null,"Login")],-1)),me={class:"form-group"},ve={class:"form-group"},fe=M('<div class="form-group" data-v-1c898fca><a href="#" class="form-forgot" data-v-1c898fca>Forgot Password?</a></div><div class="form-group" data-v-1c898fca><button class="form-button" type="submit" data-v-1c898fca>Login</button></div><div class="form-footer" data-v-1c898fca> Don&#39;t have an account? <a href="/register.html" data-v-1c898fca>Sign Up</a></div>',3),he=y({setup(a){const{Login:t}=C(),o=v(""),n=v("");return(s,i)=>(_(),m("div",de,[e("div",pe,[e("form",{class:"login-form form",onSubmit:i[2]||(i[2]=R(r=>u(t)(o.value,n.value),["prevent"]))},[_e,e("div",me,[h(e("input",{type:"text",class:"form-input",placeholder:"Handle",required:"","onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r)},null,512),[[g,o.value]])]),e("div",ve,[h(e("input",{type:"password",class:"form-input",placeholder:"Password",required:"","onUpdate:modelValue":i[1]||(i[1]=r=>n.value=r)},null,512),[[g,n.value]])]),fe],32)])]))}});var ge=S(he,[["__scopeId","data-v-1c898fca"]]);const P=a=>(U("data-v-329a6ffe"),a=a(),I(),a),be={class:"section"},ye={class:"wrap"},$e=P(()=>e("div",{class:"form-header"},[e("h3",null,"Register")],-1)),we={class:"form-group"},ke={class:"form-group"},Se={class:"form-group"},Le={class:"form-group"},xe=P(()=>e("input",{type:"password",class:"form-input ml",placeholder:"Confirm Password",required:""},null,-1)),Ne=P(()=>e("div",{class:"form-group"},[e("button",{class:"form-button",type:"submit"},"Register")],-1)),Ue=P(()=>e("div",{class:"form-footer"},[f(" Have an account? "),e("a",{href:"/login.html"},"Sign In")],-1)),Ie=y({setup(a){const{Register:t}=C(),o=v(""),n=v(""),s=v(""),i=v(""),r=v(""),c=v("");return(k,l)=>(_(),m("div",be,[e("div",ye,[e("form",{class:"register-form form",onSubmit:l[6]||(l[6]=R(p=>u(t)(i.value,r.value,o.value,s.value,n.value,c.value),["prevent"]))},[$e,e("div",we,[h(e("input",{type:"text",class:"form-input",placeholder:"First Name","onUpdate:modelValue":l[0]||(l[0]=p=>i.value=p),required:""},null,512),[[g,i.value]]),h(e("input",{type:"text",class:"form-input ml",placeholder:"Last Name","onUpdate:modelValue":l[1]||(l[1]=p=>r.value=p),required:""},null,512),[[g,r.value]])]),e("div",ke,[h(e("input",{type:"email",class:"form-input",placeholder:"Email","onUpdate:modelValue":l[2]||(l[2]=p=>s.value=p),required:""},null,512),[[g,s.value]])]),e("div",Se,[h(e("input",{type:"text",class:"form-input",placeholder:"Handle","onUpdate:modelValue":l[3]||(l[3]=p=>o.value=p),required:""},null,512),[[g,o.value]]),h(e("input",{type:"text",class:"form-input ml",placeholder:"Pic","onUpdate:modelValue":l[4]||(l[4]=p=>c.value=p),required:""},null,512),[[g,c.value]])]),e("div",Le,[h(e("input",{type:"password",class:"form-input",placeholder:"New Password","onUpdate:modelValue":l[5]||(l[5]=p=>n.value=p),required:""},null,512),[[g,n.value]]),xe]),Ne,Ue],32)])]))}});var Pe=S(Ie,[["__scopeId","data-v-329a6ffe"]]);const Ce=[{path:"/",component:ce},{path:"/about",component:L,props:{title:"About Page"}},{path:"/contact",component:L,props:{title:"Contact Page"}},{path:"/login",component:ge},{path:"/signup",component:Pe},{path:"/wall",component:()=>te(()=>import("./Wall.6fcfa579.js"),["assets/Wall.6fcfa579.js","assets/Wall.f2041c58.css","assets/vendor.af3886c7.js"])},{path:"/jobs",component:L,props:{title:"Jobs page"}},{path:"/issue",component:L,props:{title:"Issue Page"}}],$=J({history:z(),routes:Ce,linkActiveClass:"is-active"});$.beforeEach(async(a,t)=>{const o=C();if(!o.user){const s=localStorage.getItem("user");s&&await o.LoginByToken(s)}if(o.destinationUrl==null&&a.path!="/login"&&(o.destinationUrl=a.path),["/messages","/wall","/feed","/hidden"].includes(a.path.toLowerCase())&&!o.user)return"/login"});const x=B("messages",{state:()=>({notifications:[]}),actions:{close(a){this.notifications.splice(a,1)}}}),Ve="http://localhost:3004/api/",Oe=(a,t,o,n)=>{let s={method:o||"GET",headers:n};return t&&(s={method:o||"POST",headers:E({"Content-Type":"application/json",Accept:"application/json"},s.headers),cache:"no-cache",body:JSON.stringify(t)}),fetch(Ve+a,s).then(i=>i.json())},C=B("session",{state:()=>({user:null,destinationUrl:null}),actions:{async Login(a,t){var n;const o=x();try{const s=await this.api("users/login",{email:a,password:t});s&&(o.notifications.push({type:"success",message:`Welcome back ${s.firstName}!`}),this.user=s,$.push((n=this.destinationUrl)!=null?n:"/wall"),localStorage.setItem("user",s.token))}catch(s){o.notifications.push({type:"danger",message:s.message}),console.table(o.notifications)}},Logout(){this.user=null,$.push("/login"),localStorage.removeItem("user")},async Register(a,t,o,n,s,i){var k;const r=x(),c={firstName:a,lastName:t,handle:o,email:n,password:s,pic:i};try{const l=await this.api("users",c,"POST");l&&(r.notifications.push({type:"success",message:`Welcome ${l.firstName}!`}),this.user=l,$.push((k=this.destinationUrl)!=null?k:"/wall"),localStorage.setItem("user",l.token))}catch(l){r.notifications.push({type:"danger",message:l.message}),console.table(r.notifications)}},async LoginByToken(a){var t;try{const o=await this.api(`users/login/${a}`);o&&(this.user=o,$.push((t=this.destinationUrl)!=null?t:"/wall"))}catch(o){console.log(o)}},async api(a,t,o,n={}){var i,r;const s=x();((i=this.user)==null?void 0:i.token)&&(n.Authorization=`Bearer ${this.user.token}`);try{const c=await Oe(a,t,o,n);if((r=c.errors)==null?void 0:r.length)throw{message:c.errors.join("")};if(c.error)throw{message:c.error};return await c.data}catch(c){s.notifications.push({type:"danger",message:c.message})}}}});const qe=a=>(U("data-v-dd64b5ea"),a=a(),I(),a),Ee=qe(()=>e("span",{class:"icon"},[e("i",{class:"fas fa-bell"})],-1)),Te={key:0,class:"tag is-danger"},Ae={class:"navbar-dropdown"},Re=["onClick"],Be=y({setup(a){const t=x(),o=v(!1);return(n,s)=>(_(),m("div",{class:N(["navbar-item has-dropdown",{"is-active":o.value}])},[e("a",{class:"navbar-link",onClick:s[0]||(s[0]=i=>o.value=!o.value)},[Ee,u(t).notifications.length?(_(),m("span",Te,w(u(t).notifications.length),1)):G("",!0)]),e("div",Ae,[(_(!0),m(j,null,K(u(t).notifications,(i,r)=>(_(),m("div",{class:N(`notification is-light is-${i.type}`)},[e("button",{class:"delete",onClick:c=>u(t).close(r)},null,8,Re),f(" "+w(i.message),1)],2))),256))])],2))}});var A=S(Be,[["__scopeId","data-v-dd64b5ea"]]);const H=a=>(U("data-v-7afaab9c"),a=a(),I(),a),je={key:0,class:"buttons"},He=f("Log in"),We=H(()=>e("strong",null,"Sign up",-1)),Fe={key:1,class:"buttons"},De={class:"avatar"},Me={class:"avatar-image"},Je={class:"image is-64x64"},ze=["src"],Ge={class:"login-tag"},Ke=H(()=>e("strong",null,"Log Out",-1)),Qe=[Ke],Xe=y({setup(a){const t=C();return(o,n)=>{const s=V("router-link");return u(t).user?(_(),m("div",Fe,[e("div",De,[e("div",Me,[e("figure",Je,[e("img",{src:u(t).user.pic,class:"img is-rounded"},null,8,ze)])]),e("div",Ge,[e("strong",null,w(u(t).user.firstName)+" "+w(u(t).user.lastName),1),e("i",null,w(u(t).user.email),1)])]),d(A),e("a",{class:"button is-primary",onClick:n[0]||(n[0]=(...i)=>u(t).Logout&&u(t).Logout(...i))},Qe)])):(_(),m("div",je,[d(s,{class:"button is-light",to:"/login"},{default:b(()=>[He]),_:1}),d(s,{class:"button is-primary",to:"/signup"},{default:b(()=>[We]),_:1}),d(A)]))}}});var Ye=S(Xe,[["__scopeId","data-v-7afaab9c"]]);const Ze={class:"navbar is-link",role:"navigation","aria-label":"main navigation"},et={class:"container"},tt={class:"navbar-brand"},st=e("a",{class:"navbar-item",href:"https://bulma.io"},[e("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})],-1),ot=e("span",{"aria-hidden":"true"},null,-1),at=e("span",{"aria-hidden":"true"},null,-1),nt=e("span",{"aria-hidden":"true"},null,-1),it=[ot,at,nt],rt={class:"navbar-start"},lt=f("Home"),ct=f("Wall"),ut={class:"navbar-item has-dropdown is-hoverable"},dt=e("a",{class:"navbar-link"},"More",-1),pt={class:"navbar-dropdown"},_t=f("About"),mt=f("Jobs"),vt=f("Contact"),ft=e("hr",{class:"navbar-divider"},null,-1),ht=f("Report an issue"),gt={class:"navbar-end"},bt={class:"navbar-item"},yt=y({setup(a){const t=v(!1);return(o,n)=>{const s=V("router-link");return _(),m("nav",Ze,[e("div",et,[e("div",tt,[st,e("a",{role:"button",class:N(["navbar-burger",{"is-active":t.value}]),"aria-label":"menu","aria-expanded":"false",onClick:n[0]||(n[0]=i=>t.value=!t.value)},it,2)]),e("div",{class:N(["navbar-menu",{"is-active":t.value}])},[e("div",rt,[d(s,{class:"navbar-item",to:"/"},{default:b(()=>[lt]),_:1}),d(s,{class:"navbar-item",to:"/wall"},{default:b(()=>[ct]),_:1}),e("div",ut,[dt,e("div",pt,[d(s,{class:"navbar-item",to:"/about"},{default:b(()=>[_t]),_:1}),d(s,{class:"navbar-item",to:"/jobs"},{default:b(()=>[mt]),_:1}),d(s,{class:"navbar-item",to:"/contact"},{default:b(()=>[vt]),_:1}),ft,d(s,{class:"navbar-item",to:"/issue"},{default:b(()=>[ht]),_:1})])])]),e("div",gt,[e("div",bt,[d(Ye)])])],2)])])}}}),$t={class:"container"},wt=y({setup(a){return(t,o)=>{const n=V("router-view");return _(),m(j,null,[d(yt),e("div",$t,[d(n)])],64)}}});Q(wt).use($).use(X()).mount("#app");export{S as _,Oe as a,$ as r,C as u};
