import{i as T,d as v,o as u,c as p,x as w,n as d,b as f,y as U,a as s,t as h,m as S,u as i,F as m,p as $,e as C,z as b,w as B,v as k,k as D,r as I,A as N,l as g,S as V,f as A}from"./vendor.ae2ed5a7.js";import{u as y,a as P,_ as x}from"./index.035bae80.js";const F=a=>{const n=a.split("-");return new Date(parseInt(n[0]),parseInt(n[1])-1,parseInt(n[2])).getTime()},M=T("tasks",{state:()=>({tasks:[],session:y(),currentTab:"All",newTask:"",toBeAssigned:"",newDueDate:""}),actions:{changeTab(a){this.currentTab=a},async addTask(){if(!this.session.user)throw new Error("Current user not stored in addTask().");if(this.newTask&&this.toBeAssigned&&this.newDueDate){const a={title:this.newTask,isCompleted:!1,assignedTo:await this.session.api(`users/${this.toBeAssigned}`),createdBy:this.session.user,dueDate:F(this.newDueDate)};(await this.session.api("tasks",a,"POST")).data,this.newTask="",this.toBeAssigned="",this.newDueDate="",await this.fetchTasks()}},changeToBeAssigned(a){this.toBeAssigned=a},async fetchTasks(){this.tasks=(await P("tasks")).data}},getters:{displayedTasks:({tasks:a,currentTab:n,session:l})=>{if(!l.user)throw new Error("No user detected in displayedTasks()");switch(n){case"Created":return a.filter(({createdBy:t})=>{var e;return t._id===((e=l.user)==null?void 0:e._id)});case"Assigned":return a.filter(({assignedTo:t})=>{var e;return t._id===((e=l.user)==null?void 0:e._id)});case"Upcoming":return a.sort((t,e)=>t.dueDate-e.dueDate);case"Completed":return a.filter(({isCompleted:t})=>t);case"All":return a.sort((t,e)=>new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime());default:return a}}}}),E=T("users",{state:()=>({list:[],session:y()}),actions:{async fetchUsers(){this.list=await this.session.api("users")}},getters:{findUser:a=>n=>{const l=a.list.find(({_id:t})=>t===n);if(!l)throw new Error("failed to find user in findUser");return l}}}),j=a=>{const n=new Date(a);return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`};const q=a=>($("data-v-356a1234"),a=a(),C(),a),z=["onUpdate:modelValue"],L={class:"task-text"},R={class:"mini-avatar"},O={class:"image is-32x32"},W=["src"],Y={class:"date"},G=q(()=>s("h4",null,"Due Date:",-1)),H=v({props:{tasks:null,currentTab:null,findUser:null},setup(a){return(n,l)=>(u(!0),p(m,null,w(a.tasks,t=>(u(),p("a",{class:d(["panel-block",{"is-completed":a.currentTab!="Completed"&&t.isCompleted}]),key:t._id},[f(s("input",{type:"checkbox","onUpdate:modelValue":e=>t.isCompleted=e},null,8,z),[[U,t.isCompleted]]),s("div",L,h(t.title),1),s("div",R,[s("figure",O,[s("img",{src:a.findUser(t.assignedTo._id).pic,class:"img is-rounded"},null,8,W)]),s("p",null,h(a.findUser(t.assignedTo._id).firstName),1)]),s("div",Y,[G,S(" "+h(i(j)(t.dueDate)),1)])],2))),128))}});var J=x(H,[["__scopeId","data-v-356a1234"]]);const r=a=>($("data-v-786251a3"),a=a(),C(),a),K={class:"tabs is-boxed"},Q=r(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-clipboard-list"})]),s("span",null,"Created")],-1)),X=[Q],Z=r(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-calendar-times"})]),s("span",null,"Assigned")],-1)),ss=[Z],es=r(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fa-solid fa-calendar-days"})]),s("span",null,"Upcoming")],-1)),as=[es],ts=r(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fa-solid fa-calendar-check"})]),s("span",null,"Completed")],-1)),is=[ts],ns=r(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-calendar"})]),s("span",null,"All")],-1)),ls=[ns],os={class:"panel-block"},cs={class:"columns"},ds={class:"field has-addons column is-5"},rs={class:"control has-icons-left"},us=r(()=>s("span",{class:"icon is-left"},[s("i",{class:"fas fa-calendar-plus","aria-hidden":"true"})],-1)),ps=r(()=>s("div",{class:"control"},[s("button",{class:"button is-primary"},"Add")],-1)),_s={class:"column is-2"},hs={class:"dropdown is-hoverable"},fs={class:"dropdown-trigger"},ms={class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},vs=r(()=>s("span",{class:"icon is-small"},[s("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1)),bs={class:"dropdown-menu",id:"dropdown-menu4",role:"menu"},ks={class:"dropdown-content"},gs=["onClick"],Ts={class:"image is-32x32"},ws=["src"],$s={class:"column is-3"},Cs=v({async setup(a){let n,l;const t=E(),e=M();return[n,l]=b(()=>e.fetchTasks()),await n,l(),[n,l]=b(()=>t.fetchUsers()),await n,l(),(_,o)=>(u(),p(m,null,[s("div",K,[s("ul",null,[s("li",{class:d({"is-active":i(e).currentTab=="Created"}),onClick:o[0]||(o[0]=c=>i(e).changeTab("Created"))},X,2),s("li",{class:d({"is-active":i(e).currentTab=="Assigned"}),onClick:o[1]||(o[1]=c=>i(e).changeTab("Assigned"))},ss,2),s("li",{class:d({"is-active":i(e).currentTab=="Upcoming"}),onClick:o[2]||(o[2]=c=>i(e).changeTab("Upcoming"))},as,2),s("li",{class:d({"is-active":i(e).currentTab=="Completed"}),onClick:o[3]||(o[3]=c=>i(e).changeTab("Completed"))},is,2),s("li",{class:d({"is-active":i(e).currentTab=="All"}),onClick:o[4]||(o[4]=c=>i(e).changeTab("All"))},ls,2)])]),s("div",os,[s("form",{onSubmit:o[7]||(o[7]=B((...c)=>i(e).addTask&&i(e).addTask(...c),["prevent"])),style:{"flex-grow":"1"}},[s("div",cs,[s("div",ds,[s("div",rs,[f(s("input",{class:"input is-primary",type:"text",placeholder:"New Task","onUpdate:modelValue":o[5]||(o[5]=c=>i(e).newTask=c),maxlength:"35",required:""},null,512),[[k,i(e).newTask]]),us]),ps]),s("div",_s,[s("div",hs,[s("div",fs,[s("button",ms,[s("span",null,h(i(e).toBeAssigned?i(t).findUser(i(e).toBeAssigned).firstName:"Worker"),1),vs])]),s("div",bs,[s("div",ks,[(u(!0),p(m,null,w(i(t).list,c=>(u(),p("a",{class:"dropdown-item mini-avatar",onClick:Ms=>i(e).changeToBeAssigned(c._id)},[s("figure",Ts,[s("img",{src:c.pic,class:"img is-rounded"},null,8,ws)]),s("p",null,h(c.firstName),1)],8,gs))),256))])])])]),s("div",$s,[f(s("input",{type:"date",class:"date-picker",required:"","onUpdate:modelValue":o[6]||(o[6]=c=>i(e).newDueDate=c)},null,512),[[k,i(e).newDueDate]])])]),D(J,{tasks:i(e).displayedTasks,currentTab:i(e).currentTab,findUser:i(t).findUser},null,8,["tasks","currentTab","findUser"])],32)])],64))}});var Ds=x(Cs,[["__scopeId","data-v-786251a3"]]);const As={class:"section"},ys={class:"container"},xs={class:"columns"},Us={class:"column is-7"},Ss={class:"panel"},Bs=s("div",null,"Loading",-1),Is={class:"column is-4"},Ns={class:"panel"},Vs=A('<p class="panel-heading">Repositories</p><div class="panel-block"><p class="control has-icons-left"><input class="input" type="text" placeholder="Search"><span class="icon is-left"><i class="fas fa-search" aria-hidden="true"></i></span></p></div>',2),Ps={class:"panel-tabs"},Fs=A('<a class="panel-block is-active"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> bulma </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> marksheet </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> minireset.css </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> jgthms.github.io </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-code-branch" aria-hidden="true"></i></span> daniellowtw/infboard </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-code-branch" aria-hidden="true"></i></span> mojs </a><label class="panel-block"><input type="checkbox"> remember me </label><div class="panel-block"><button class="button is-link is-outlined is-fullwidth">Reset all filters</button></div>',8),qs=v({setup(a){const n=I("All"),l=t=>{n.value=t};return(t,e)=>(u(),p("div",As,[s("div",ys,[s("div",xs,[s("div",Us,[s("article",Ss,[(u(),N(V,null,{default:g(()=>[D(Ds)]),fallback:g(()=>[Bs]),_:1}))])]),s("div",Is,[s("nav",Ns,[Vs,s("p",Ps,[s("a",{class:d({"is-active":n.value=="All"}),onClick:e[0]||(e[0]=_=>l("All"))},"All",2),s("a",{class:d({"is-active":n.value=="Public"}),onClick:e[1]||(e[1]=_=>l("Public"))},"Public",2),s("a",{class:d({"is-active":n.value=="Private"}),onClick:e[2]||(e[2]=_=>l("Private"))},"Private",2),s("a",{class:d({"is-active":n.value=="Sources"}),onClick:e[3]||(e[3]=_=>l("Sources"))},"Sources",2),s("a",{class:d({"is-active":n.value=="Forks"}),onClick:e[4]||(e[4]=_=>l("Forks"))},"Forks",2)]),Fs])])])])]))}});export{qs as default};
