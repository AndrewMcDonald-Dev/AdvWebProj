import{i as w,d as v,o as p,c as _,x as T,n as r,u as i,b as m,y as B,a as s,t as h,m as I,F as f,p as $,e as C,z as g,w as N,v as b,k as D,r as V,f as y}from"./vendor.52fddfac.js";import{u as A,a as k,_ as x}from"./index.252da528.js";const P=a=>{const t=a.split("-");return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])).getTime()},U=w("message",{state:()=>({tasks:[],session:A(),currentTab:"All",newTask:"",toBeAssigned:"",newDueDate:""}),actions:{changeTab(a){this.currentTab=a},async addTask(){if(!this.session.user)throw new Error("Current user not stored in addTask().");if(this.newTask&&this.toBeAssigned&&this.newDueDate){let a={title:this.newTask,isCompleted:!1,assignedTo:await k(`users${this.toBeAssigned}`),createdBy:this.session.user,dueDate:P(this.newDueDate),timeCreated:new Date};a=(await this.session.api("tasks",a,"POST")).data,this.tasks.unshift(a),this.newTask="",this.toBeAssigned="",this.newDueDate=""}},changeToBeAssigned(a){this.toBeAssigned=a},async fetchTasks(){this.tasks=(await k("tasks")).data}},getters:{displayedTasks:({tasks:a,currentTab:t,session:n})=>{if(!n.user)throw new Error("No user detected in displayedTasks()");switch(t){case"Created":return a.filter(({createdBy:o})=>{var e;return o._id===((e=n.user)==null?void 0:e._id)});case"Assigned":return a.filter(({assignedTo:o})=>{var e;return o._id===((e=n.user)==null?void 0:e._id)});case"Upcoming":return a.sort((o,e)=>o.dueDate-e.dueDate);case"Completed":return a.filter(({isCompleted:o})=>o);case"All":return a.sort((o,e)=>new Date(e.timeCreated).getTime()-new Date(o.timeCreated).getTime());default:return a}}}}),S=w("users",{state:()=>({list:[],session:A()}),actions:{async fetchUsers(){this.list=await this.session.api("users")}},getters:{findUser:a=>t=>{const n=a.list.find(({_id:o})=>o===t);if(!n)throw new Error("failed to find user in findUser");return n}}}),F=a=>{const t=new Date(a);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`};const M=a=>($("data-v-012e6935"),a=a(),C(),a),E=["onUpdate:modelValue"],j={class:"task-text"},q={class:"mini-avatar"},z={class:"image is-32x32"},R=["src"],L={class:"date"},O=M(()=>s("h4",null,"Due Date:",-1)),W=v({setup(a){console.log("test1");const{findUser:t}=S();console.log("test");const n=U();return console.log(n.tasks),(o,e)=>(p(!0),_(f,null,T(i(n).displayedTasks,c=>(p(),_("a",{class:r(["panel-block",{"is-completed":i(n).currentTab!="Completed"&&c.isCompleted}]),key:c._id},[m(s("input",{type:"checkbox","onUpdate:modelValue":l=>c.isCompleted=l},null,8,E),[[B,c.isCompleted]]),s("div",j,h(c.title),1),s("div",q,[s("figure",z,[s("img",{src:i(t)(c.assignedTo._id).pic,class:"img is-rounded"},null,8,R)]),s("p",null,h(i(t)(c.assignedTo._id).firstName),1)]),s("div",L,[O,I(" "+h(i(F)(c.dueDate)),1)])],2))),128))}});var Y=x(W,[["__scopeId","data-v-012e6935"]]);const u=a=>($("data-v-7be826f2"),a=a(),C(),a),G={class:"tabs is-boxed"},H=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-clipboard-list"})]),s("span",null,"Created")],-1)),J=[H],K=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-calendar-times"})]),s("span",null,"Assigned")],-1)),Q=[K],X=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fa-solid fa-calendar-days"})]),s("span",null,"Upcoming")],-1)),Z=[X],ss=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fa-solid fa-calendar-check"})]),s("span",null,"Completed")],-1)),es=[ss],as=u(()=>s("a",null,[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-calendar"})]),s("span",null,"All")],-1)),ts=[as],is={class:"panel-block"},ns={class:"columns"},os={class:"field has-addons column is-5"},ls={class:"control has-icons-left"},cs=u(()=>s("span",{class:"icon is-left"},[s("i",{class:"fas fa-calendar-plus","aria-hidden":"true"})],-1)),ds=u(()=>s("div",{class:"control"},[s("button",{class:"button is-primary"},"Add")],-1)),rs={class:"column is-2"},us={class:"dropdown is-hoverable"},ps={class:"dropdown-trigger"},_s={class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},hs=u(()=>s("span",{class:"icon is-small"},[s("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1)),ms={class:"dropdown-menu",id:"dropdown-menu4",role:"menu"},fs={class:"dropdown-content"},vs=["onClick"],gs={class:"image is-32x32"},bs=["src"],ks={class:"column is-3"},ws=v({async setup(a){let t,n;const o=S();[t,n]=g(()=>o.fetchUsers()),await t,n();const e=U();return[t,n]=g(()=>e.fetchTasks()),await t,n(),(c,l)=>(p(),_(f,null,[s("div",G,[s("ul",null,[s("li",{class:r({"is-active":i(e).currentTab=="Created"}),onClick:l[0]||(l[0]=d=>i(e).changeTab("Created"))},J,2),s("li",{class:r({"is-active":i(e).currentTab=="Assigned"}),onClick:l[1]||(l[1]=d=>i(e).changeTab("Assigned"))},Q,2),s("li",{class:r({"is-active":i(e).currentTab=="Upcoming"}),onClick:l[2]||(l[2]=d=>i(e).changeTab("Upcoming"))},Z,2),s("li",{class:r({"is-active":i(e).currentTab=="Completed"}),onClick:l[3]||(l[3]=d=>i(e).changeTab("Completed"))},es,2),s("li",{class:r({"is-active":i(e).currentTab=="All"}),onClick:l[4]||(l[4]=d=>i(e).changeTab("All"))},ts,2)])]),s("div",is,[s("form",{onSubmit:l[7]||(l[7]=N((...d)=>i(e).addTask&&i(e).addTask(...d),["prevent"])),style:{"flex-grow":"1"}},[s("div",ns,[s("div",os,[s("div",ls,[m(s("input",{class:"input is-primary",type:"text",placeholder:"New Task","onUpdate:modelValue":l[5]||(l[5]=d=>i(e).newTask=d),maxlength:"35",required:""},null,512),[[b,i(e).newTask]]),cs]),ds]),s("div",rs,[s("div",us,[s("div",ps,[s("button",_s,[s("span",null,h(i(e).toBeAssigned?i(o).findUser(i(e).toBeAssigned).firstName:"Worker"),1),hs])]),s("div",ms,[s("div",fs,[(p(!0),_(f,null,T(i(o).list,d=>(p(),_("a",{class:"dropdown-item mini-avatar",onClick:Ns=>i(e).changeToBeAssigned(d._id)},[s("figure",gs,[s("img",{src:d.pic,class:"img is-rounded"},null,8,bs)]),s("p",null,h(d.firstName),1)],8,vs))),256))])])])]),s("div",ks,[m(s("input",{type:"date",class:"date-picker",required:"","onUpdate:modelValue":l[6]||(l[6]=d=>i(e).newDueDate=d)},null,512),[[b,i(e).newDueDate]])])]),D(Y)],32)])],64))}});var Ts=x(ws,[["__scopeId","data-v-7be826f2"]]);const $s={class:"section"},Cs={class:"container"},Ds={class:"columns"},ys={class:"column is-7"},As={class:"panel"},xs={class:"column is-4"},Us={class:"panel"},Ss=y('<p class="panel-heading">Repositories</p><div class="panel-block"><p class="control has-icons-left"><input class="input" type="text" placeholder="Search"><span class="icon is-left"><i class="fas fa-search" aria-hidden="true"></i></span></p></div>',2),Bs={class:"panel-tabs"},Is=y('<a class="panel-block is-active"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> bulma </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> marksheet </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> minireset.css </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-book" aria-hidden="true"></i></span> jgthms.github.io </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-code-branch" aria-hidden="true"></i></span> daniellowtw/infboard </a><a class="panel-block"><span class="panel-icon"><i class="fas fa-code-branch" aria-hidden="true"></i></span> mojs </a><label class="panel-block"><input type="checkbox"> remember me </label><div class="panel-block"><button class="button is-link is-outlined is-fullwidth">Reset all filters</button></div>',8),Fs=v({setup(a){const t=V("All"),n=o=>{t.value=o};return(o,e)=>(p(),_("div",$s,[s("div",Cs,[s("div",Ds,[s("div",ys,[s("article",As,[D(Ts)])]),s("div",xs,[s("nav",Us,[Ss,s("p",Bs,[s("a",{class:r({"is-active":t.value=="All"}),onClick:e[0]||(e[0]=c=>n("All"))},"All",2),s("a",{class:r({"is-active":t.value=="Public"}),onClick:e[1]||(e[1]=c=>n("Public"))},"Public",2),s("a",{class:r({"is-active":t.value=="Private"}),onClick:e[2]||(e[2]=c=>n("Private"))},"Private",2),s("a",{class:r({"is-active":t.value=="Sources"}),onClick:e[3]||(e[3]=c=>n("Sources"))},"Sources",2),s("a",{class:r({"is-active":t.value=="Forks"}),onClick:e[4]||(e[4]=c=>n("Forks"))},"Forks",2)]),Is])])])])]))}});export{Fs as default};
